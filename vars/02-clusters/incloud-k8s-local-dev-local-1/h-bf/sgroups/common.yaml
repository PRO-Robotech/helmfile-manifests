appSpec:
  applications:
    server:
      replicas: 1
      volumes:
        certificateIstio:
          volume:
            mode: configMap
            notReleased: true
            name: istio-ca-root-cert

        configurationServerFile:
          volume:
            mode: configMap
            name: server-config
            payload:
              format: json
              content:
                server:
                  api-path-prefix: apis/proxy.sgroups.io/v1alpha1
                authn:
                  type: tls
                  tls:
                    key-file: "/opt/h-bf/sgroups/tls/tls.key"
                    cert-file: "/opt/h-bf/sgroups/tls/tls.crt"
                    client:
                      verify: skip
                      ca-files:
                        - "/opt/h-bf/sgroups/tls/ca.crt"
                        - "/opt/h-bf/sgroups-isrio/tls/ca.crt"
      containers:
        server:
          # image:
          #   repository: sgroups/sgroups.server
          #   tag: ""
          extraResources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 128Mi
      initContainers:
        migration:
          # image:
          #   repository: sgroups/sgroups.goose
          #   tag: ""
          extraResources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 128Mi

          extraVolumeMounts:
            certificateIstio:
              volumeMount:
                path: /opt/h-bf/sgroups-isrio/tls

    web:
      replicas: 1
      containers:
        web:
          # image:
          #   repository: sgroups/sgroups.ui
          #   tag: ""
          extraResources:
            limits:
              cpu: 200m
              memory: 256Mi
            requests:
              cpu: 100m
              memory: 128Mi
